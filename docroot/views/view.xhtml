<?xml version="1.0"?>

<f:view
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:aui="http://liferay.com/faces/aui"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:components="http://java.sun.com/jsf/composite/components">

	<h:head />

	<h:body>
		<h:messages showSummary="true" showDetail="true" />

		<p:tabView id="tabView">  
			<p:tab id="tab1" title="Creation">
				<aui:layout>
					<aui:column>
						<components:currentTaskSessionComponent
							currentTaskSession="#{taskSessionSimpleBean.currentTaskSession}"
							rendered="#{not empty taskSessionSimpleBean.currentTaskSession}"
							todayWithoutTime="#{taskSessionSimpleBean.todayWithoutTime}" />
					</aui:column>

					<aui:column>
						<components:endTaskComponent
							actionMethod="#{taskSessionSimpleBean.finishTaskSessionAction}"
							endTime="#{taskSessionSimpleBean.endTime}"
							rendered="#{not empty taskSessionSimpleBean.currentTaskSession}" />
					</aui:column>
				</aui:layout>

				<p:separator />

				<aui:layout>
					<aui:column>
						<h:form id="taskForm">
							<components:taskComponent
								actionMethod="#{taskBean.createTaskAction}"
								projectRoot="#{enabledProjectBean.root}"
								selectedProjectNode="#{enabledProjectBean.selectedProjectNode}"
								startTime="#{taskSessionSimpleBean.startTime}"
								taskName="#{taskBean.taskName}" />
						</h:form>

						<hr />

						<h:form id="taskSessionForm">
							<ui:repeat var="task" value="#{taskBean.tasksByUser}">
								<components:taskComponent
									actionMethod="#{taskSessionMultipleBean.createTaskSessionAction}"
									selectedTask="#{task}"
									startTime="#{taskSessionMultipleBean.startTimes[task.taskId]}" />
							</ui:repeat>
						</h:form>
					</aui:column>
				</aui:layout>
			</p:tab>

			<p:tab id="tab2" title="Daily View">
				<components:taskSessionList taskBean="#{taskBean}" />
			</p:tab> 
		</p:tabView>
	</h:body>
</f:view>