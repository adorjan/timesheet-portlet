<?xml version="1.0"?>

<f:view
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:aui="http://liferay.com/faces/aui"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:components="http://java.sun.com/jsf/composite/components">

	<h:head />

	<h:body>
		<h:messages showSummary="true" showDetail="true" />

		<p:tabView id="tabView">
			<p:tab id="tab1" title="Project">
				<h:form id="treeForm">
					<aui:layout id="layout">
						<aui:column id="column1">
							<p:contextMenu for="projectTree" id="menu">
								<p:menuitem action="#{projectBean.newAction}" icon="ui-icon-new" id="newMenuItem"
									update=":#{p:component('column2')}" value="New" />

								<p:menuitem action="#{projectBean.editAction}" icon="ui-icon-edit" id="editMenuItem"
									update=":#{p:component('column2')}" value="Edit" />	
							</p:contextMenu>

							<p:tree draggable="true" droppable="true" dragdropScope="demo" id="projectTree"
								selection="#{projectBean.selectedProjectNode}" selectionMode="single"
								value="#{projectBean.root}" var="project">

								<p:ajax event="unselect" listener="#{projectBean.onNodeUnSelect}" update=":#{p:component('column2')}" />

								<p:ajax event="select" listener="#{projectBean.onNodeSelect}" update=":#{p:component('column2')}" />

								<p:treeNode>
									<h:outputText value="#{project}" />
								</p:treeNode>  
							</p:tree>
						</aui:column>

						<aui:column id="column2">
							<p:menubar rendered="#{projectBean.selectedProjectNode!=null}">
								<p:menuitem action="#{projectBean.newAction}" icon="ui-icon-new" id="newMenuItem"
									update=":#{p:component('column2')}" value="New" />

								<p:menuitem action="#{projectBean.editAction}" icon="ui-icon-edit" id="editMenuItem"
									update=":#{p:component('column2')}" value="Edit" />	
							</p:menubar>

							<components:projectNode bean="#{projectBean}" id="projectNodeComponent" />
						</aui:column>
					</aui:layout>
				</h:form>
			</p:tab>

			<p:tab id="tab2" title="Task">
				<h:panelGrid columns="2" cellpadding="10">

				</h:panelGrid>
			</p:tab>
		</p:tabView>
	</h:body>
</f:view>